(this.webpackJsonpmovie_log=this.webpackJsonpmovie_log||[]).push([[0],{30:function(e,t,n){e.exports=n(49)},35:function(e,t,n){},36:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),i=n(11),c=n.n(i),r=(n(35),n(36),n(6)),l=n(8),s=n(10),u=n(9),m=n(54),v=n(51),d=n(52),h=n(53),f=o.a.createContext(null),E=function(e){return function(t){return o.a.createElement(f.Consumer,null,(function(n){return o.a.createElement(e,Object.assign({},t,{firebase:n}))}))}},b=f,p=n(17),C=n.n(p),_=(n(38),{apiKey:"AIzaSyCdJOxwFWk7SxrGfqBUxrqLlSwaJMKZblQ",authDomain:"movielog-8cd72.firebaseapp.com",databaseURL:"https://movielog-8cd72.firebaseio.com",projectId:"movielog-8cd72",storageBucket:"movielog-8cd72.appspot.com",messagingSenderId:"550835897015",appId:"1:550835897015:web:02c8bb5cecf65676a14332",measurmentID:Object({NODE_ENV:"production",PUBLIC_URL:"/movie_log",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_TMDB_API_KEY:"ac7c16e09fe0f72cc9de8d5ba3bc8d94",REACT_APP_API_KEY:"AIzaSyCdJOxwFWk7SxrGfqBUxrqLlSwaJMKZblQ",REACT_APP_AUTH_DOMAIN:"movielog-8cd72.firebaseapp.com",REACT_APP_DATABASE_URL:"https://movielog-8cd72.firebaseio.com",REACT_APP_PROJECT_ID:"movielog-8cd72",REACT_APP_STORAGE_BUCKET:"movielog-8cd72.appspot.com",REACT_APP_MESSAGING_SENDER_ID:"550835897015",REACT_APP_APP_ID:"1:550835897015:web:02c8bb5cecf65676a14332"}).REACT_APP_MEASUREMENT_ID}),g=function e(){var t=this;Object(r.a)(this,e),this.user=function(e){return t.db.ref("users/".concat(e))},this.getCollectionRef=function(){return t.user("PREDEFINED_USER").child("/collection")},this.getMovieRef=function(e){return t.getCollectionRef().child(e)},this.addMovieToCollection=function(e,n,a,o){t.getMovieRef(e).set({title:n,overview:a,release_date:o})},this.removeMovieFromCollection=function(e){t.getMovieRef(e).remove()},C.a.initializeApp(_),this.db=C.a.database()},A=n(55),S=n(56),R=(n(41),E((function(e){var t=e.id,n=e.movie,a=e.inCollection,i=e.firebase,c=n.title,r=n.overview,l=void 0===r?"":r,s=n.release_date,u=void 0===s?"Unknown Date":s;return o.a.createElement(A.a,{className:"bg-secondary text-white movieCard"},o.a.createElement(A.a.Body,{className:"movieCardContent"},o.a.createElement(A.a.Title,null,c),o.a.createElement(A.a.Subtitle,{className:"mb-2"},u),o.a.createElement(A.a.Text,{className:"overview"},l),o.a.createElement(S.a,{className:"colButton",variant:"primary",onClick:function(){return a?i.removeMovieFromCollection(t):i.addMovieToCollection(t,c,l,u)}},a?"Remove":"Add")))}))),O=(n(42),E((function(e){var t=e.movieCollection,n=Object.keys(t);return o.a.createElement("div",null,0===n.length?"Search for a movie to add to your collection.":n.map((function(e,n){return o.a.createElement("div",null,o.a.createElement(R,{id:e,movie:t[e],inCollection:!0}),o.a.createElement("br",null))})))}))),P=n(24),T=o.a.createContext(null),D=function(e){return function(t){return o.a.createElement(T.Consumer,null,(function(n){return o.a.createElement(e,Object.assign({},t,{movieDb:n}))}))}},j=T,y=n(27),k="https://api.themoviedb.org/3/search/movie?api_key=".concat("ac7c16e09fe0f72cc9de8d5ba3bc8d94"),w=function e(){var t=this;Object(r.a)(this,e),this.addListener=function(e){t.listeners.push(e)},this.handleSearch=function(e){0!=e.length&&fetch("".concat(k,"&query=").concat(e)).then((function(e){return e.json()})).then((function(e){t.movies=Object(y.a)(e.results),t.numResults=e.total_results})).then((function(){console.log("NumResults:".concat(t.numResults))})).then((function(){return t.listeners.forEach((function(e){return e.forceUpdate()}))}))},this.movies=[],this.numResults=0,this.listeners=[]},M=(n(43),D(function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this)).onChange=function(e){a.setState(Object(P.a)({},e.target.name,e.target.value))},a.onSubmit=function(e){e.preventDefault(),a.props.movieDb.handleSearch(a.state.search)},a.state={search:""},a}return Object(l.a)(n,[{key:"render",value:function(){var e=this.state.search;return o.a.createElement("form",{onSubmit:this.onSubmit},o.a.createElement("input",{className:"search_bar",name:"search",value:e,onChange:this.onChange,type:"text",placeholder:"Search for movie..."})," ",o.a.createElement(S.a,{variant:"outline-dark",type:"submit"},"Search"))}}]),n}(o.a.Component))),N=(n(44),D(function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){return Object(r.a)(this,n),t.call(this)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.movieDb.addListener(this)}},{key:"render",value:function(){var e=this,t=this.props.movieDb.numResults;return 0===t?o.a.createElement("h1",null,"No search results."):o.a.createElement("div",null,o.a.createElement("h1",null,t," Results."),this.props.movieDb.movies.slice(0,11).map((function(t,n){return o.a.createElement("div",null,o.a.createElement(R,{key:n,id:t.id,movie:t,inCollection:!!e.props.movieCollection[t.id]}),o.a.createElement("br",{key:n}))})))}}]),n}(a.Component))),I=E(function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this)).state={movieCollection:{}},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.firebase.getCollectionRef().on("value",(function(t){t.exists()?e.setState({movieCollection:t.val()}):e.setState({movieCollection:{}})}))}},{key:"render",value:function(){return o.a.createElement("div",{className:"home"},o.a.createElement(m.a,{bg:"dark",variant:"dark"},o.a.createElement(m.a.Brand,null,"Movie Collection App")),o.a.createElement(v.a,{fluid:!0,className:"main"},o.a.createElement(d.a,null,o.a.createElement(h.a,null,o.a.createElement("h1",null,"My Collection"),o.a.createElement(O,{movieCollection:this.state.movieCollection})),o.a.createElement(h.a,null,o.a.createElement(M,null),o.a.createElement(N,{movieCollection:this.state.movieCollection})))))}}]),n}(a.Component));var x=function(){return o.a.createElement("div",{className:"App"},o.a.createElement(I,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(48);c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(b.Provider,{value:new g},o.a.createElement(j.Provider,{value:new w},o.a.createElement(x,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[30,1,2]]]);
//# sourceMappingURL=main.f430a1d5.chunk.js.map